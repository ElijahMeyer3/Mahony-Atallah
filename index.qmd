---
title: "undergrad wellness"
format: live-html
webr:
  packages: 
    - tidyverse
    - scales
  cell-options:
    autorun: false
  resources:
    - https://raw.githubusercontent.com/ElijahMeyer3/Mahony-Atallah/main/data/`Undergraduate Character Strengths Data.xlsx`
---

### Packages

```{r}
library(tidyverse)
library(readxl)
```


### Data

```{r}
kma <- read_xlsx("data/MiniGrant_Data in Full KMA.xlsx")

kma_clean <- kma |>
  fill(DOB:Major_code, .direction = "down") |>
  mutate(across(everything(), as.character)) |>
  mutate(across(everything(), ~na_if(.x, "."))) |>
  mutate(DOB = replace(DOB, DOB == "39179", "04/07/2007"))
  

  
kma_clean$DOB

kma_clean$SCS_1
```

Questions: 

What do the dots mean? Different than NA?

What do the dots mean as they pertain to SWLS/PANAS/CSSWQ/SC scores?

ID65 has a DOB of: 39179 ???

What is the `Interest_School Psych Test` variable? Why do some participants have > 1 entry and others don't?

The `Appeal` variables are binary. What are these?




### EDA

```{r}
kma_clean |>
  count(Gender_text, Race_text) |>
  mutate(n = n /3)

kma_clean |>
  count(Year_text, Major_code) |>
  mutate(n = n /3) |>
  arrange(desc(n))
  
```


## Playing 

```{r}
kma_clean$Time_text <- fct_relevel(kma_clean$Time_text, "pre")

kma_clean |>
  # Generate the ID column
  mutate(uniqueid = rep(1:65, each = 3)) |>
  # Remove NAs before plotting
  filter(!is.na(SCS_1)) |>
  ggplot(aes(
    y = SCS_1, 
    x = Time_text, 
    group = uniqueid,   # Removed the period; this connects the points
    color = factor(uniqueid) # Optional: colors each line differently
  )) +
  geom_point() + 
  geom_line() +
  geom_point(data = middle, aes(y = mean_score), pch = 16, size = 6) +
  geom_line(data = middle, aes(y = mean_score), lwd = 2, color = "black") +
  theme_minimal() +
  guides(color = "none") +
  facet_grid(~Group_code)

middle <- kma_clean |>
  filter(!is.na(SCS_1)) |>
  mutate(SCS_1 = as.numeric(SCS_1)) |> 
  group_by(Time_text, Group_code) |>
  summarise(mean_score = mean(SCS_1)) |>
  mutate(uniqueid = rep(66,1))
```

